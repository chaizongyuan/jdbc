package jdbc;


/**
 * DriverManager 驱动管理类 通过获取不同数据库的驱动类 实现不同的登陆方式
 * Connection 用于和数据库进行连接类
 * @author Administrator
 */
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.sql.Timestamp;
import java.text.SimpleDateFormat;


public class TestLogin {
	/**
	 * 用于格式化转换日期
	 */
	static SimpleDateFormat sdf = new SimpleDateFormat("YYYY-MMM-DD hh:mm:ss");
	public static void main(String[] args) {
		/**
		 * jdbc链接的数据服务器的ip 端口 数据库名
		 *mysql url是jdbc:mysal://ip地址:3306/数据库名
		 *oracle url是 jidc:oracle:thin:@ip地址:1521:sid(orcl)
		 */
		String url ="jdbc:mysql://localhost:3306/test";
		//告诉jdbc使用的是什么数据库 不同数据提供一些不同类型
		String driverClass="com.mysql.jdbc.Driver";
		String userName="root";
		String password="123456";
		//需要jvm加载该类
		try {
			Class.forName(driverClass);
			//登录成功
			Connection conn= DriverManager.getConnection(url,userName,password);
			System.out.println(conn);
			//Statement用于执行静态的sql语句
			Statement state = conn.createStatement();
			//ResultSet 游标遍历数据行 next();
			ResultSet rs = state.executeQuery("select * from userinfo");
			while(rs.next()){
				String uname=rs.getString("username");//通过列名获取数据
				String sex = rs.getString("usersex");
				//mysql datetime对应java.sql.Timestamp
				Timestamp date = rs.getTimestamp(4);//获取列索引获取数据
				System.out.println(uname+"--"+sex+"--"+sdf.format(date));
			}
			
		} catch (Exception e) {	
			e.printStackTrace();
		}
		
	}
}
